import { panicTypeOnlyVariable, type Optionable, type TypeMarker } from "@blazyts/better-standard-library";

import type { ExtractParams } from "../../main";
import type { RouteMAtcher } from "@blazyts/backend-lib";

export class NormalRouting<T extends string> implements RouteMAtcher<ExtractParams<T>> {
  type = "normal";

  constructor(private routeString: T) { }

  getRouteString() {
    return this.routeString;
  }

  TGetRouteString: T = (() => panicTypeOnlyVariable()) as any;

  typeInfo: TypeMarker<string>;

  match(path: string): Optionable<ExtractParams<T>> {
    return this.routeString === path ? this.routeString : undefined;
  }

  TGetContextType: ExtractParams<T>;
}
